<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Page not found — loading app...</title>

  <!-- Optional: lightweight inline styling so this file looks ok while it loads -->
  <style>
    html,body { height:100%; margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial; background:#fff; color:#222; display:flex; align-items:center; justify-content:center; }
    .loader { text-align:center; max-width:34rem; padding:1rem; }
    .loader h1 { margin:0 0 .5rem 0; font-size:1.1rem; font-weight:600; }
    .loader p { margin:0; color:#555; }
    a { color:inherit; text-decoration:underline; }
  </style>
</head>
<body>
  <div class="loader" id="status">
    <h1>Page not found — loading the application</h1>
    <p>If your app does not appear automatically, <a id="homeLink" href="/">go to the homepage</a>.</p>
    <p style="margin-top:.75rem; font-size:.9rem; color:#777">If JavaScript is disabled, use the homepage link above.</p>
  </div>

  <script>
  (function () {
    // Safety: don't run in older/unsupported browsers (very rare), show the fallback link instead.
    if (!window.fetch || !window.history) return;

    // Save the requested path so we can restore it after injecting index.html
    var originalPath = location.pathname + location.search + location.hash;

    // If the user actually requested index.html directly, go to root instead (avoids loop)
    if (originalPath === '/index.html' || originalPath === '/') {
      // show friendly message and stop
      document.getElementById('status').querySelector('h1').textContent = 'Page not found';
      return;
    }

    // Attempt to fetch index.html from the site root
    fetch('/index.html', { cache: 'no-store' }).then(function (res) {
      if (!res.ok) throw new Error('index.html not returned (status ' + res.status + ')');
      return res.text();
    }).then(function (html) {
      // Replace current document with index.html content
      // This is equivalent to serving index.html for the requested route.
      document.open();
      document.write(html);
      document.close();

      try {
        // Overwrite the browser URL to the original path so the SPA router sees it.
        // Use replaceState so back-button behavior is natural.
        history.replaceState({}, '', originalPath);
      } catch (e) {
        // ignore replaceState errors in restricted environments
        console.warn('Could not replace history state:', e);
      }

      // If your SPA mounts automatically on DOMContentLoaded or uses hydration,
      // it should now handle the route as if index.html was served directly.
    }).catch(function (err) {
      // If fetching index fails, show a helpful message and keep the fallback link.
      console.error('Failed to load index.html for client routing fallback:', err);
      var st = document.getElementById('status');
      st.querySelector('h1').textContent = 'Page not found';
      var p = document.createElement('p');
      p.style.marginTop = '.6rem';
      p.style.color = '#a00';
      p.textContent = 'Automatic app fallback failed. Click the homepage link to continue.';
      st.appendChild(p);
    });
  })();
  </script>

  <noscript>
    <div style="padding:1rem; text-align:center;">
      <p>JavaScript is disabled. Please <a href="/">go to the homepage</a> and navigate from there.</p>
    </div>
  </noscript>
</body>
</html>